Index: app/src/main/res/layout/game_over.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@android:color/transparent\"\r\n    android:orientation=\"vertical\">\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/gameOverText\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@android:color/transparent\"\r\n        android:fontFamily=\"sans-serif-condensed-medium\"\r\n        android:padding=\"?attr/dialogPreferredPadding\"\r\n        android:shadowColor=\"@color/colorPrimary\"\r\n        android:shadowDy=\"10\"\r\n        android:shadowRadius=\"10\"\r\n        android:text=\"Game Over\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/colorPrimaryDark\"\r\n        android:textSize=\"36sp\"\r\n        android:textStyle=\"bold\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        tools:layout_editor_absoluteY=\"-97dp\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/newHighScore\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@android:color/transparent\"\r\n        android:elevation=\"2dp\"\r\n        android:fontFamily=\"sans-serif-condensed-medium\"\r\n        android:gravity=\"center\"\r\n        android:paddingTop=\"30dp\"\r\n        android:paddingBottom=\"50dp\"\r\n        android:shadowColor=\"@color/colorPrimary\"\r\n        android:shadowDy=\"10\"\r\n        android:shadowRadius=\"10\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/colorPrimaryDark\"\r\n        android:textSize=\"30sp\"\r\n        android:textStyle=\"bold\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        tools:layout_editor_absoluteY=\"70dp\" />\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"70dp\"\r\n        android:background=\"@android:color/transparent\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        tools:layout_editor_absoluteY=\"0dp\">\r\n\r\n        <Button\r\n            android:id=\"@+id/tryAgain\"\r\n            android:layout_width=\"150dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@color/colorPrimaryDark\"\r\n            android:fontFamily=\"sans-serif-condensed-medium\"\r\n            android:shadowColor=\"@color/colorPrimary\"\r\n            android:shadowDy=\"10\"\r\n            android:shadowRadius=\"10\"\r\n            android:text=\"Try Again\"\r\n            android:textColor=\"@android:color/white\"\r\n            android:textSize=\"18sp\"\r\n            android:textStyle=\"bold\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView7\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"24dp\"\r\n            android:layout_marginBottom=\"460dp\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/game_over.xml	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/res/layout/game_over.xml	(date 1604969937711)
@@ -12,10 +12,10 @@
         android:id="@+id/gameOverText"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
+        android:layout_weight="1"
         android:background="@android:color/transparent"
         android:fontFamily="sans-serif-condensed-medium"
         android:padding="?attr/dialogPreferredPadding"
-        android:shadowColor="@color/colorPrimary"
         android:shadowDy="10"
         android:shadowRadius="10"
         android:text="Game Over"
@@ -30,6 +30,7 @@
         android:id="@+id/newHighScore"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
+        android:layout_weight="1"
         android:background="@android:color/transparent"
         android:elevation="2dp"
         android:fontFamily="sans-serif-condensed-medium"
@@ -46,41 +47,42 @@
         tools:layout_editor_absoluteX="0dp"
         tools:layout_editor_absoluteY="70dp" />
 
-    <androidx.constraintlayout.widget.ConstraintLayout
+    <LinearLayout
         android:layout_width="match_parent"
-        android:layout_height="70dp"
-        android:background="@android:color/transparent"
-        tools:layout_editor_absoluteX="0dp"
-        tools:layout_editor_absoluteY="0dp">
+        android:layout_height="wrap_content"
+        android:layout_weight="1"
+        android:orientation="horizontal">
+
+        <Space
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:layout_weight="1" />
 
         <Button
             android:id="@+id/tryAgain"
-            android:layout_width="150dp"
+            android:layout_width="match_parent"
             android:layout_height="wrap_content"
+            android:layout_gravity="center"
             android:layout_weight="1"
-            android:background="@color/colorPrimaryDark"
+            android:background="@drawable/roundedbuttonshape"
             android:fontFamily="sans-serif-condensed-medium"
-            android:shadowColor="@color/colorPrimary"
+            android:gravity="center"
             android:shadowDy="10"
             android:shadowRadius="10"
             android:text="Try Again"
             android:textColor="@android:color/white"
             android:textSize="18sp"
-            android:textStyle="bold"
-            app:layout_constraintEnd_toEndOf="parent"
-            app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toTopOf="parent" />
+            android:textStyle="bold" />
 
-        <TextView
-            android:id="@+id/textView7"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginTop="24dp"
-            android:layout_marginBottom="460dp"
-            app:layout_constraintBottom_toBottomOf="parent"
-            app:layout_constraintEnd_toEndOf="parent"
-            app:layout_constraintStart_toStartOf="parent"
-            app:layout_constraintTop_toTopOf="parent" />
-    </androidx.constraintlayout.widget.ConstraintLayout>
+        <Space
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:layout_weight="1" />
+    </LinearLayout>
+
+    <Space
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_weight="1" />
 
 </LinearLayout>
\ No newline at end of file
Index: app/src/main/res/layout/activity_main_menu.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/colorDragon\"\r\n    android:theme=\"@style/ThemeOverlay.Dragon.FullscreenContainer\"\r\n    tools:context=\".Main_menu\">\r\n\r\n    <!-- The primary full-screen view. This can be replaced with whatever view\r\n         is needed to present your content, e.g. VideoView, SurfaceView,\r\n         TextureView, etc. -->\r\n    <TextView\r\n        android:id=\"@+id/fullscreen_content\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:keepScreenOn=\"true\"\r\n        android:text=\"@string/dummy_content\"\r\n        android:textColor=\"@color/colorDragon\"\r\n        android:textSize=\"50sp\"\r\n        android:textStyle=\"bold\" />\r\n\r\n    <!-- This FrameLayout insets its children based on system windows using\r\n         android:fitsSystemWindows. -->\r\n    <FrameLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:fitsSystemWindows=\"true\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <Space\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_weight=\"1\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:gravity=\"center\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <Button\r\n                    android:id=\"@+id/button6\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"20dp\"\r\n                    android:paddingLeft=\"50dp\"\r\n                    android:paddingRight=\"50dp\"\r\n                    android:text=\"Start\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <Space\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_weight=\"1\" />\r\n\r\n        </LinearLayout>\r\n    </FrameLayout>\r\n\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_main_menu.xml	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/res/layout/activity_main_menu.xml	(date 1604969937673)
@@ -49,9 +49,11 @@
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_margin="20dp"
+                    android:background="@drawable/roundedbuttonshape"
                     android:paddingLeft="50dp"
                     android:paddingRight="50dp"
-                    android:text="Start" />
+                    android:text="Start"
+                    android:textColor="#FFFFFF" />
 
             </LinearLayout>
 
Index: app/src/main/res/layout/activity_pause_menu.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@drawable/roundedbuttonshape\"\r\n    android:theme=\"@style/ThemeOverlay.Dragon.FullscreenContainer\"\r\n    tools:context=\".Pause_menu\">\r\n\r\n    <!-- The primary full-screen view. This can be replaced with whatever view\r\n         is needed to present your content, e.g. VideoView, SurfaceView,\r\n         TextureView, etc. -->\r\n    <TextView\r\n        android:id=\"@+id/fullscreen_content\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center\"\r\n        android:keepScreenOn=\"true\"\r\n        android:textColor=\"#00FFFFFF\"\r\n        android:textSize=\"50sp\"\r\n        android:textStyle=\"bold\" />\r\n\r\n    <!-- This FrameLayout insets its children based on system windows using\r\n         android:fitsSystemWindows. -->\r\n    <FrameLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:fitsSystemWindows=\"true\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:id=\"@+id/CardMenu\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_weight=\"1\"\r\n                android:background=\"#F8F8F8\"\r\n                app:cardCornerRadius=\"20dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <LinearLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_weight=\"1\"\r\n                        android:orientation=\"horizontal\"\r\n                        android:paddingLeft=\"30dp\"\r\n                        android:paddingTop=\"10dp\"\r\n                        android:paddingRight=\"30dp\"\r\n                        android:paddingBottom=\"10dp\">\r\n\r\n                        <Space\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_weight=\"2\" />\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_weight=\"1\"\r\n                            android:orientation=\"vertical\">\r\n\r\n                            <Button\r\n                                android:id=\"@+id/pauseRestart\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:layout_weight=\"1\"\r\n                                android:background=\"@drawable/roundedbuttonshape\"\r\n                                android:text=\"Restart\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/pauseContinue\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:layout_weight=\"1\"\r\n                                android:background=\"@drawable/roundedbuttonshape\"\r\n                                android:text=\"Continue\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/pauseCredits\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:layout_weight=\"1\"\r\n                                android:background=\"@drawable/roundedbuttonshape\"\r\n                                android:text=\"Credits\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n\r\n                            <Button\r\n                                android:id=\"@+id/pauseExit\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:layout_weight=\"1\"\r\n                                android:background=\"@drawable/roundedbuttonshape\"\r\n                                android:text=\"Exit\"\r\n                                android:textColor=\"#FFFFFF\" />\r\n                        </LinearLayout>\r\n\r\n                        <Space\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:layout_weight=\"2\" />\r\n\r\n                    </LinearLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView5\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Music\"\r\n                        android:textColor=\"#000000\" />\r\n\r\n                    <SeekBar\r\n                        android:id=\"@+id/seekBar\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingLeft=\"20dp\"\r\n                        android:paddingRight=\"20dp\"\r\n                        android:paddingBottom=\"20dp\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/textView6\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"Sound Effects\"\r\n                        android:textColor=\"#000000\" />\r\n\r\n                    <SeekBar\r\n                        android:id=\"@+id/seekBar3\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingLeft=\"20dp\"\r\n                        android:paddingRight=\"20dp\"\r\n                        android:paddingBottom=\"20dp\" />\r\n\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"right\"\r\n                android:layout_weight=\"0.7\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <androidx.cardview.widget.CardView\r\n                    android:id=\"@+id/creditsCard\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_margin=\"40dp\"\r\n                    android:layout_weight=\"0.7\"\r\n                    android:visibility=\"invisible\"\r\n                    app:cardCornerRadius=\"20dp\">\r\n\r\n                    <androidx.core.widget.NestedScrollView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_margin=\"20dp\"\r\n                        android:fillViewport=\"true\">\r\n\r\n                        <LinearLayout\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:gravity=\"center\"\r\n                            android:orientation=\"vertical\">\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textView4\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:text=\"I’ve learned: How to animate Game objects. Detect if game objects get close to each other. How to use physics class. How to use update class. Use Array List class. How to measure Max FPS and scale it under each screen automatically. How to use Android studio Git without github. \"\r\n                                android:textColor=\"#000000\" />\r\n\r\n                            <androidx.cardview.widget.CardView\r\n                                android:layout_width=\"100dp\"\r\n                                android:layout_height=\"100dp\"\r\n                                android:layout_margin=\"10dp\"\r\n                                app:cardCornerRadius=\"1000dp\">\r\n\r\n                                <ImageView\r\n                                    android:id=\"@+id/mannyImage\"\r\n                                    android:layout_width=\"match_parent\"\r\n                                    android:layout_height=\"match_parent\"\r\n                                    android:elevation=\"7dp\" />\r\n                            </androidx.cardview.widget.CardView>\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textView2\"\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:text=\"I’ve learned: How to animate Game objects. Detect if game objects get close to each other. How to use physics class. How to use update class. Use Array List class. How to measure Max FPS and scale it under each screen automatically. How to use Android studio Git without github. \"\r\n                                android:textColor=\"#000000\" />\r\n\r\n                            <androidx.cardview.widget.CardView\r\n                                android:layout_width=\"100dp\"\r\n                                android:layout_height=\"100dp\"\r\n                                android:layout_margin=\"10dp\"\r\n                                app:cardCornerRadius=\"1000dp\">\r\n\r\n                                <ImageView\r\n                                    android:id=\"@+id/silberFrostImage\"\r\n                                    android:layout_width=\"match_parent\"\r\n                                    android:layout_height=\"match_parent\"\r\n                                    android:elevation=\"7dp\" />\r\n                            </androidx.cardview.widget.CardView>\r\n\r\n                            <TextView\r\n                                android:id=\"@+id/textView\"\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:layout_margin=\"10dp\"\r\n                                android:text=\"I’ve learned: How to animate Game objects. Detect if game objects get close to each other. How to use physics class. How to use update class. Use Array List class. How to measure Max FPS and scale it under each screen automatically. How to use Android studio Git without github. \"\r\n                                android:textColor=\"#000000\" />\r\n\r\n                            <androidx.cardview.widget.CardView\r\n                                android:layout_width=\"100dp\"\r\n                                android:layout_height=\"100dp\"\r\n                                android:layout_margin=\"10dp\"\r\n                                app:cardCornerRadius=\"1000dp\">\r\n\r\n                                <ImageView\r\n                                    android:id=\"@+id/heroXImage\"\r\n                                    android:layout_width=\"match_parent\"\r\n                                    android:layout_height=\"match_parent\"\r\n                                    android:elevation=\"7dp\" />\r\n                            </androidx.cardview.widget.CardView>\r\n                        </LinearLayout>\r\n                    </androidx.core.widget.NestedScrollView>\r\n\r\n                </androidx.cardview.widget.CardView>\r\n            </LinearLayout>\r\n\r\n        </LinearLayout>\r\n\r\n    </FrameLayout>\r\n\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_pause_menu.xml	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/res/layout/activity_pause_menu.xml	(date 1604969937535)
@@ -4,7 +4,6 @@
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    android:background="@drawable/roundedbuttonshape"
     android:theme="@style/ThemeOverlay.Dragon.FullscreenContainer"
     tools:context=".Pause_menu">
 
Index: app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/GameView.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\npackage mnm.bcs106.yoobeecolleges.dragon;\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.LightingColorFilter;\r\nimport android.graphics.Paint;\r\nimport android.util.AttributeSet;\r\nimport android.util.DisplayMetrics;\r\nimport android.view.SurfaceHolder;\r\nimport android.view.SurfaceView;\r\nimport android.widget.Button;\r\n\r\n//-----------------------------------------------------------------------------------------------------------\r\n//Game engine\r\n//Handles logic, physics and graphics\r\n//-----------------------------------------------------------------------------------------------------------\r\n\r\npublic class GameView extends SurfaceView implements Runnable {\r\n    public static GameView instance;\r\n    int screenWidth, screenHeight, cameraSize;\r\n    Vector2 screenCenter;\r\n\r\n\r\n//    final float fixedDeltaTime = (int) (1000 / Game.instance.refreshRating); // in milliseconds\r\n    final float fixedDeltaTime = (int) (1000 / 30); // in milliseconds\r\n    public float timeScale = 1;\r\n    float deltaTime = fixedDeltaTime;\r\n\r\n    //Physics\r\n    public float groundLevel, upperBound, gravity = 0.3f;\r\n    int physicsIterations = 5;\r\n    Vector2 cameraDisp = Vector2.zero;\r\n\r\n    //Projectile\r\n    int projectileIndex = 0;//Next projectile in array to spawn\r\n    float shootSpeedVariance=0.1f, shootDirectionVariance = 10f;//Error in shooting speed and direction\r\n\r\n    //Logic\r\n    boolean isRunning = false;\r\n    Thread gameThread, drawThread;\r\n    //WaveController waveController;//Controls when enemies spawn\r\n    int enemyIndex = 0;//Next enemy in array to spawn\r\n    Vector2 moveBy;\r\n\r\n    //Scene\r\n    Scene scene;\r\n\r\n\r\n    //Game objects\r\n    //Game objects\r\n    public Dragon player;\r\n    GameObject ground;\r\n    NPC_Pool npc_pool;\r\n    GoldPool goldPool;\r\n    ProjectilePool projectilePool;\r\n    FirePool firePool;\r\n    Lair lair;\r\n    Fortress fortress;\r\n    Hud hud;\r\n\r\n    //Drawing\r\n    SurfaceHolder holder;\r\n    Paint back = new Paint();\r\n    SpriteManager spriteManager;\r\n    boolean isDrawing = true;\r\n\r\n    public GameView(Context context) {\r\n        super(context);\r\n        init();\r\n    }\r\n\r\n    public GameView(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n        init();\r\n    }\r\n\r\n    public GameView(Context context, AttributeSet attrs, int defStyleAttr) {\r\n        super(context, attrs, defStyleAttr);\r\n        init();\r\n    }\r\n\r\n    public GameView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {\r\n        super(context, attrs, defStyleAttr, defStyleRes);\r\n        init();\r\n    }\r\n\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    //Initialization\r\n    //-----------------------------------------------------------------------------------------------------------\r\n\r\n    void init(){\r\n        instance = this;\r\n        DisplayMetrics displayMetrics = new DisplayMetrics();\r\n        ((Activity) getContext()).getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n        screenHeight = displayMetrics.heightPixels;\r\n        screenWidth = displayMetrics.widthPixels;\r\n        cameraSize = (int) (screenWidth);\r\n        screenCenter = new Vector2(screenWidth/2,screenHeight/2);\r\n        back.setColor(Color.WHITE);\r\n        holder = getHolder();\r\n\r\n        groundLevel = screenHeight*7/10;\r\n\r\n        spriteManager = new SpriteManager();\r\n        //Init scene\r\n\r\n        scene = new Scene();\r\n\r\n        //Player gameobject\r\n        Bitmap playerSprite = BitmapFactory.decodeResource(this.getResources(), R.drawable.empty);\r\n        player = new Dragon(playerSprite,0.5f,0.9f,screenHeight/20,screenHeight/20);\r\n        player.setDamagedSound(SoundEffects.DAMAGE);\r\n        player.setDestroyedSound(SoundEffects.DEATH);\r\n\r\n        lair = new Lair();\r\n\r\n\r\n        npc_pool = new NPC_Pool();\r\n\r\n        goldPool = new GoldPool();\r\n        projectilePool = new ProjectilePool();\r\n        firePool = new FirePool();\r\n\r\n\r\n\r\n        hud = new Hud();\r\n\r\n\r\n\r\n\r\n        fortress = new Fortress( screenWidth*2, (int)groundLevel, true);\r\n        //npc_pool.spawnThiefs((int)fortress.x ,(int)groundLevel,1);\r\n        //npc_pool.spawnDragonLayers((int)fortress.x ,(int)groundLevel,1);\r\n        //npc_pool.spawnWizard((int)fortress.x ,(int)groundLevel,1);\r\n        npc_pool.spawnTribute((int)fortress.x ,(int)groundLevel,500);\r\n        Game.instance.gameOver = false;\r\n\r\n        resume();\r\n\r\n    }\r\n\r\n    Vector2 randomPosition(){\r\n        Vector2 random = Vector2.getRandom();\r\n        random.x *= ground.width*0.3f;\r\n        random.y *= ground.height*0.3f;\r\n        return ground.position.add(random);\r\n    }\r\n\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    //Game loop\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    float totalFrame, numberFrame;\r\n    public void resume() {\r\n        isRunning = true;\r\n        gameThread = new Thread(this);\r\n        gameThread.start();\r\n    }\r\n\r\n    public void pause() {\r\n        isRunning = false;\r\n        boolean retry = true;\r\n        while (retry) {\r\n            try {\r\n                gameThread.join();//execute completely and then stop\r\n                retry = false;\r\n            } catch (Exception e) {\r\n                gameThread.stop();\r\n            }\r\n        }\r\n    }\r\n\r\n    public void run() {\r\n        while (isRunning) {\r\n\r\n            long started = System.currentTimeMillis();\r\n            //Apply physics calculations per frame\r\n            for (int i = 0; i < physicsIterations; i++) {\r\n                physics();\r\n            }\r\n            long physicsTime = System.currentTimeMillis();\r\n            //System.out.println( \"physics \" + (physicsTime - started));\r\n\r\n            //Apply game logic to game objects\r\n\r\n            update();\r\n            long updateTime = System.currentTimeMillis();\r\n            //System.out.println( \"update \" + (updateTime-physicsTime));\r\n            if(isDrawing) {\r\n                draw();\r\n            }\r\n            long drawTime = System.currentTimeMillis() - updateTime;\r\n            //System.out.println( \"draw main \" + drawTime);\r\n            totalFrame += drawTime;\r\n            numberFrame++;\r\n            //System.out.println(\"average draw \" + totalFrame/numberFrame);\r\n\r\n            //If the time between frames does not match the target FPS, delay or skip to match\r\n\r\n            deltaTime = (System.currentTimeMillis() - started);\r\n            int lag = (int) (fixedDeltaTime/timeScale - deltaTime);\r\n\r\n            //System.out.println(deltaTime + \" \" + fixedDeltaTime + \" \" + lag);\r\n            if (lag > 0) {\r\n                try {\r\n                    gameThread.sleep(lag);\r\n                } catch (Exception e) {\r\n                }\r\n            }\r\n            while (lag < 0) {\r\n                lag += fixedDeltaTime/timeScale;\r\n                //Apply physics calculations per frame\r\n                for (int i = 0; i < physicsIterations; i++) {\r\n                    physics();\r\n                }\r\n                //Apply game logic to game objects\r\n                update();\r\n            }\r\n        }\r\n    }\r\n\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    //Graphics\r\n    //-----------------------------------------------------------------------------------------------------------\r\n\r\n    private void draw() {\r\n        Canvas canvas = new Canvas();\r\n        try {\r\n            canvas = holder.lockCanvas(null);\r\n        }\r\n        catch (Exception e){\r\n\r\n        }\r\n        if (canvas != null) {\r\n            //90\r\n            //canvas.drawRect(0, 0, screenWidth * 1.2f, screenHeight, back);\r\n            scene.drawBackground(canvas);//40\r\n            lair.draw(canvas);//80\r\n            fortress.draw(canvas);//90\r\n            projectilePool.draw(canvas);//80\r\n\r\n            npc_pool.draw(canvas);//90\r\n            goldPool.draw(canvas);//\r\n            player.draw(canvas);//80\r\n            firePool.draw(canvas);\r\n            scene.drawForeground(canvas);//\r\n\r\n\r\n            hud.draw(canvas);\r\n            holder.unlockCanvasAndPost(canvas);\r\n        }\r\n    }\r\n\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    //Physics\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    private void physics() {\r\n        cameraDisp.x = -player.position.x+screenWidth/2;\r\n        if(!Game.instance.gameOver) {\r\n\r\n            npc_pool.physics(fixedDeltaTime);\r\n            fortress.physics(deltaTime);\r\n            //Enemy motion\r\n            if (!player.destroyed) {\r\n                goldPool.physics(fixedDeltaTime / physicsIterations);\r\n                projectilePool.physics(fixedDeltaTime / physicsIterations);\r\n                player.physics(fixedDeltaTime / physicsIterations);\r\n            }\r\n        }\r\n    }\r\n\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    //Game logic\r\n    //-----------------------------------------------------------------------------------------------------------\r\n    private void update() {\r\n        if(player.visible){\r\n            player.update(fixedDeltaTime);\r\n            scene.update(fixedDeltaTime);\r\n            npc_pool.update(fixedDeltaTime);\r\n            projectilePool.update(fixedDeltaTime);\r\n            //System.out.println(fixedDeltaTime +\" \"+ deltaTime);\r\n            goldPool.update(fixedDeltaTime);\r\n            fortress.update(fixedDeltaTime);\r\n            hud.update(fixedDeltaTime);\r\n            lair.update(fixedDeltaTime);\r\n            firePool.update(fixedDeltaTime);\r\n        }\r\n        else{\r\n            if(!Game.instance.gameOver) {\r\n                Game.instance.showGameOver = true;\r\n            }\r\n        }\r\n    }\r\n    public void movePlayerBy(Vector2 dv){\r\n\r\n        if(dv!=null){\r\n            this.moveBy = new Vector2(dv.x,dv.y);\r\n            player.moveBy(moveBy.multiply(player.maxMoveSpeed));\r\n\r\n        }\r\n        else {\r\n            player.moveBy(dv);\r\n        }\r\n    }\r\n\r\n    public float getGroundLevel(){\r\n        return  groundLevel;\r\n    }\r\n    public void breathFire(boolean breathingFire){\r\n\r\n        player.breathingFire = breathingFire;\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/GameView.java	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/GameView.java	(date 1604971043231)
@@ -25,8 +25,8 @@
     Vector2 screenCenter;
 
 
-//    final float fixedDeltaTime = (int) (1000 / Game.instance.refreshRating); // in milliseconds
-    final float fixedDeltaTime = (int) (1000 / 30); // in milliseconds
+    final float fixedDeltaTime = (int) (1000 / Game.instance.refreshRating); // in milliseconds
+//    final float fixedDeltaTime = (int) (1000 / 30); // in milliseconds
     public float timeScale = 1;
     float deltaTime = fixedDeltaTime;
 
Index: app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Farmers.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+> package mnm.bcs106.yoobeecolleges.dragon;\r\n\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Point;\r\nimport android.graphics.Rect;\r\n\r\n public class Farmers extends NPC {\r\n\r\n    public int farmX;\r\n    public int workTime = 0;\r\n    public boolean wasAttacked = false;\r\n    public boolean atFarm = false;\r\n    public boolean whereFarm = false;\r\n    public boolean work = false;\r\n    Bitmap idleSprite, workingSprite;\r\n\r\n    public Farmers( float speed, int maxHP, int width, int height,int FX) {\r\n        super(speed, maxHP, width, height);\r\n        farmX = npcX ;\r\n\r\n        Bitmap npcSheet = SpriteManager.instance.NPCSheet;\r\n        Rect r = SpriteManager.instance.getNPCSprite(\"Farmer1\");\r\n        idleSprite =Bitmap.createBitmap(npcSheet,r.left,r.top,r.width(),r.height());\r\n\r\n        r = SpriteManager.instance.getNPCSprite(\"Farmer2\");\r\n        workingSprite =Bitmap.createBitmap(npcSheet,r.left,r.top,r.width(),r.height());\r\n\r\n        npcBitmap = idleSprite;\r\n    }\r\n\r\n    @Override\r\n    public void spawn(int spawnX, int spawnY) {\r\n        super.spawn(spawnX, spawnY);\r\n        work = false;\r\n    }\r\n\r\n    public void doStuff() {\r\n        if (countdown >= Math.random()*5000+8000){\r\n                flee = false;\r\n                double targetDistance = (Math.random()-0.5f) * Farm.tileNr*GameView.instance.cameraSize/9;\r\n                target.x = (int) (farmX+ targetDistance);\r\n                countdown = 0;\r\n        }\r\n\r\n    }\r\n\r\n    public Boolean atHome = false;\r\n    @Override\r\n    public void update(float deltaTime) {\r\n        if(((Scene.instance.timeOfDay)/(Scene.instance.dayLength) > 0) && ((Scene.instance.timeOfDay)/(Scene.instance.dayLength) < 0.4) && alive) {\r\n            if (!wasAttacked) {\r\n                if (Math.abs(GameView.instance.player.position.x - npcX) < 300 && Math.abs(GameView.instance.player.position.y - npcY)< GameView.instance.screenHeight/2) {\r\n                    flee = true;\r\n                    work = false;\r\n                    target.x = (int) (npcX + (-(Math.signum(GameView.instance.player.position.x - npcX)) * 1500));\r\n                    tempCreationPoint.x = target.x;\r\n                    wasAttacked = true;\r\n                }\r\n                if(whereFarm){\r\n                    if(!atFarm) {\r\n                        target.x = farmX;\r\n                        work = false;\r\n                    }\r\n                    else {\r\n                        work = true;\r\n                        doStuff();\r\n                    }\r\n                    if(Math.abs(target.x - npcX) < 7){\r\n                        atFarm = true;\r\n                    }\r\n                }\r\n            } else {\r\n                if (Math.abs(GameView.instance.player.position.x - npcX) < 300) {\r\n                    flee = true;\r\n                    work = false;\r\n                    target.x = (int) (npcX + (-(Math.signum(GameView.instance.player.position.x - npcX)) * 1500));\r\n                    tempCreationPoint.x = target.x;\r\n                } else {\r\n                    idle(500, Math.abs(npcX - target.x) < 10);\r\n                }\r\n            }\r\n            if (atHome){\r\n                npcY = CreationPoint.y;\r\n                atHome = false;\r\n                flee = false;\r\n            }\r\n            if (!whereFarm) {\r\n                Point closestFarm = new Point();\r\n                closestFarm.y = 100000;\r\n                for (int j = 0; j < GameView.instance.fortress.currentBuildingsRight.size(); j++) {\r\n                    if (GameView.instance.fortress.currentBuildingsRight.get(j).buildingType == 3) {\r\n                        if (Math.abs(npcX - GameView.instance.fortress.currentBuildingsRight.get(j).x) < closestFarm.y) {\r\n                            farmX = (int) (GameView.instance.fortress.currentBuildingsRight.get(j).x+GameView.instance.fortress.tilesize*1.5);\r\n                            closestFarm.y = Math.abs(npcX - GameView.instance.fortress.currentBuildingsRight.get(j).x);\r\n                        }\r\n                    }\r\n                }\r\n                for (int j = 0; j < GameView.instance.fortress.currentBuildingsLeft.size(); j++) {\r\n                    if (GameView.instance.fortress.currentBuildingsLeft.size() > j) {\r\n                        if (GameView.instance.fortress.currentBuildingsLeft.get(j).buildingType == 3) {\r\n                            if (Math.abs(npcX - GameView.instance.fortress.currentBuildingsLeft.get(j).x) < closestFarm.y) {\r\n                                farmX = (int) (GameView.instance.fortress.currentBuildingsLeft.get(j).x+GameView.instance.fortress.tilesize*1.5);\r\n                                closestFarm.y = Math.abs(npcX - GameView.instance.fortress.currentBuildingsLeft.get(j).x);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (farmX != npcX) {\r\n                    whereFarm = true;\r\n                }\r\n            }\r\n\r\n            super.update(deltaTime);\r\n        }else{\r\n            if (alive){\r\n                if (Math.abs(npcX-CreationPoint.x) < 7 && !atHome){\r\n//                    System.out.println(\"CP = \" + CreationPoint.x + \" Target = \" + target.x + \" TempCP = \" + tempCreationPoint.x);\r\n                    atHome = true;\r\n                    tempCreationPoint.x = CreationPoint.x;\r\n                    tempCreationPoint.y = CreationPoint.y;\r\n                }\r\n                if (!atHome){\r\n                    target.x = CreationPoint.x;\r\n                    super.update(deltaTime);\r\n                }else {\r\n                    wasAttacked = false;\r\n                    npcY += npcRect.height()*7;\r\n                    npcRect.offsetTo((int) (npcX+GameView.instance.cameraDisp.x),npcY);\r\n            }\r\n            }else {\r\n                if(wasAttacked = true){\r\n                    int r = (int)(Math.random()*3);\r\n                    GoldPool.instance.spawnGold(npcX, npcY,r);}\r\n                wasAttacked = false;\r\n                super.update(deltaTime);\r\n            }\r\n        }\r\n        if ((Scene.instance.timeOfDay)/(Scene.instance.dayLength)>0.4) {\r\n            target.x = tempCreationPoint.x;\r\n            atFarm = false;\r\n            workTime = 0;\r\n            work = false;\r\n            flee = true;\r\n            npcBitmap = idleSprite;\r\n        }\r\n        if (work) {\r\n            workTime += deltaTime;\r\n            npcBitmap = workingSprite;\r\n        }\r\n        else{\r\n            npcBitmap = idleSprite;\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Farmers.java	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Farmers.java	(date 1604972146147)
@@ -47,7 +47,7 @@
     public Boolean atHome = false;
     @Override
     public void update(float deltaTime) {
-        if(((Scene.instance.timeOfDay)/(Scene.instance.dayLength) > 0) && ((Scene.instance.timeOfDay)/(Scene.instance.dayLength) < 0.4) && alive) {
+        if(((Scene.instance.timeOfDay)/(Scene.instance.dayLength) > 0) && ((Scene.instance.timeOfDay)/(Scene.instance.dayLength) < 0.5) && alive) {
             if (!wasAttacked) {
                 if (Math.abs(GameView.instance.player.position.x - npcX) < 300 && Math.abs(GameView.instance.player.position.y - npcY)< GameView.instance.screenHeight/2) {
                     flee = true;
@@ -135,7 +135,7 @@
                 super.update(deltaTime);
             }
         }
-        if ((Scene.instance.timeOfDay)/(Scene.instance.dayLength)>0.4) {
+        if ((Scene.instance.timeOfDay)/(Scene.instance.dayLength)>0.5) {
             target.x = tempCreationPoint.x;
             atFarm = false;
             workTime = 0;
Index: app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Wooloo.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package mnm.bcs106.yoobeecolleges.dragon;\r\n\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Rect;\r\n\r\npublic class Wooloo extends NPC{\r\n\r\n    int boundry;\r\n\r\n    public Wooloo(float speed, int maxHP, int width, int height, int SBoundry) {\r\n        super(speed, maxHP, width, height);\r\n        Bitmap npcSheet = SpriteManager.instance.NPCSheet;\r\n        Rect r = SpriteManager.instance.getNPCSprite(\"Wooloo\");\r\n        npcBitmap =Bitmap.createBitmap(npcSheet,r.left,r.top,r.width(),r.height());\r\n        boundry = SBoundry;\r\n    }\r\n    @Override\r\n    public void update(float deltaTime) {\r\n        super.update(deltaTime);\r\n        if (Math.abs(GameView.instance.player.position.x-npcX)<300 && Math.abs(GameView.instance.player.position.y - npcY)< GameView.instance.screenHeight/2){\r\n            flee = true;\r\n            target.x = (int) (npcX+(-(Math.signum(GameView.instance.player.position.x-npcX))*1500));\r\n            tempCreationPoint.x= target.x;\r\n        }else if((Scene.instance.timeOfDay)/(Scene.instance.dayLength) > 0 && (Scene.instance.timeOfDay)/(Scene.instance.dayLength) < 0.5 ){\r\n            idle(500,Math.abs(npcX-target.x) < 10);\r\n            npcY = (int) GameView.instance.groundLevel-npcRect.height();\r\n            npcRect.offsetTo((int) (npcX+GameView.instance.cameraDisp.x),npcY);\r\n        }\r\n        else{\r\n            if(!flee) {\r\n                npcY = (int) GameView.instance.groundLevel - npcRect.height() + npcRect.height() / 8;\r\n            }\r\n            else{\r\n                npcY = (int) GameView.instance.groundLevel-npcRect.height();\r\n            }\r\n            npcRect.offsetTo((int) (npcX+GameView.instance.cameraDisp.x),npcY);\r\n        }\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Wooloo.java	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/java/mnm/bcs106/yoobeecolleges/dragon/Wooloo.java	(date 1604971706435)
@@ -17,24 +17,23 @@
     @Override
     public void update(float deltaTime) {
         super.update(deltaTime);
-        if (Math.abs(GameView.instance.player.position.x-npcX)<300 && Math.abs(GameView.instance.player.position.y - npcY)< GameView.instance.screenHeight/2){
-            flee = true;
-            target.x = (int) (npcX+(-(Math.signum(GameView.instance.player.position.x-npcX))*1500));
-            tempCreationPoint.x= target.x;
-        }else if((Scene.instance.timeOfDay)/(Scene.instance.dayLength) > 0 && (Scene.instance.timeOfDay)/(Scene.instance.dayLength) < 0.5 ){
-            idle(500,Math.abs(npcX-target.x) < 10);
-            npcY = (int) GameView.instance.groundLevel-npcRect.height();
-            npcRect.offsetTo((int) (npcX+GameView.instance.cameraDisp.x),npcY);
-        }
-        else{
-            if(!flee) {
-                npcY = (int) GameView.instance.groundLevel - npcRect.height() + npcRect.height() / 8;
-            }
-            else{
-                npcY = (int) GameView.instance.groundLevel-npcRect.height();
-            }
-            npcRect.offsetTo((int) (npcX+GameView.instance.cameraDisp.x),npcY);
+        if (alive) {
+            if (Math.abs(GameView.instance.player.position.x - npcX) < 300 && Math.abs(GameView.instance.player.position.y - npcY) < GameView.instance.screenHeight / 2) {
+                flee = true;
+                target.x = (int) (npcX + (-(Math.signum(GameView.instance.player.position.x - npcX)) * 1500));
+                tempCreationPoint.x = target.x;
+            } else if ((Scene.instance.timeOfDay) / (Scene.instance.dayLength) > 0 && (Scene.instance.timeOfDay) / (Scene.instance.dayLength) < 0.5) {
+                idle(500, Math.abs(npcX - target.x) < 10);
+                npcY = (int) GameView.instance.groundLevel - npcRect.height();
+                npcRect.offsetTo((int) (npcX + GameView.instance.cameraDisp.x), npcY);
+            } else {
+                if (!flee) {
+                    npcY = (int) GameView.instance.groundLevel - npcRect.height() + npcRect.height() / 8;
+                } else {
+                    npcY = (int) GameView.instance.groundLevel - npcRect.height();
+                }
+                npcRect.offsetTo((int) (npcX + GameView.instance.cameraDisp.x), npcY);
+            }
         }
-
     }
 }
Index: app/src/main/res/drawable/roundedbuttonshape.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<shape xmlns:android=\"http://schemas.android.com/apk/res/android\">\r\n    <corners android:radius=\"15dp\" />\r\n    <solid android:color=\"#6E6E6E\" />\r\n</shape>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/drawable/roundedbuttonshape.xml	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ app/src/main/res/drawable/roundedbuttonshape.xml	(date 1604969056959)
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android">
-    <corners android:radius="15dp" />
+    <corners android:radius="1000dp" />
     <solid android:color="#6E6E6E" />
 </shape>
\ No newline at end of file
Index: ../.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"NONE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"2c456dbc-1908-40f2-80b2-0a9bff2325fc\" name=\"Default Changelist\" comment=\"\" />\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1hyRBJqIinM8JAy5Yx7d3w5cJmI\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"android.sdk.path\" value=\"$USER_HOME$/AppData/Local/Android/Sdk\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/dragon\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"settings.github\" />\r\n    <property name=\"show.migrate.to.gradle.popup\" value=\"false\" />\r\n  </component>\r\n  <component name=\"SvnConfiguration\">\r\n    <configuration />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"2c456dbc-1908-40f2-80b2-0a9bff2325fc\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1600981208954</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1600981208954</updated>\r\n    </task>\r\n    <servers />\r\n  </component>\r\n  <component name=\"WindowStateProjectService\">\r\n    <state x=\"532\" y=\"194\" key=\"FileChooserDialogImpl\" timestamp=\"1603706403726\">\r\n      <screen x=\"0\" y=\"0\" width=\"1366\" height=\"728\" />\r\n    </state>\r\n    <state x=\"532\" y=\"194\" key=\"FileChooserDialogImpl/0.0.1366.728@0.0.1366.728\" timestamp=\"1603706403726\" />\r\n    <state x=\"598\" y=\"220\" key=\"FileChooserDialogImpl/0.0.1536.824@0.0.1536.824\" timestamp=\"1603393637918\" />\r\n    <state x=\"748\" y=\"276\" key=\"FileChooserDialogImpl/0.0.1920.1035@0.0.1920.1035\" timestamp=\"1603162232134\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- ../.idea/workspace.xml	(revision 83332cfc9d0534ecf2d92aa7fa3d872581a5a9e9)
+++ ../.idea/workspace.xml	(date 1604970185816)
@@ -3,8 +3,17 @@
   <component name="AutoImportSettings">
     <option name="autoReloadType" value="NONE" />
   </component>
+  <component name="BranchesTreeState">
+    <expand />
+    <select />
+  </component>
   <component name="ChangeListManager">
-    <list default="true" id="2c456dbc-1908-40f2-80b2-0a9bff2325fc" name="Default Changelist" comment="" />
+    <list default="true" id="6a385fd7-059e-420c-baaa-4cbb99a4d933" name="Default Changelist" comment="Desighne">
+      <change beforePath="$PROJECT_DIR$/dragon/app/src/main/res/drawable/roundedbuttonshape.xml" beforeDir="false" afterPath="$PROJECT_DIR$/dragon/app/src/main/res/drawable/roundedbuttonshape.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/dragon/app/src/main/res/layout/activity_main_menu.xml" beforeDir="false" afterPath="$PROJECT_DIR$/dragon/app/src/main/res/layout/activity_main_menu.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/dragon/app/src/main/res/layout/activity_pause_menu.xml" beforeDir="false" afterPath="$PROJECT_DIR$/dragon/app/src/main/res/layout/activity_pause_menu.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/dragon/app/src/main/res/layout/game_over.xml" beforeDir="false" afterPath="$PROJECT_DIR$/dragon/app/src/main/res/layout/game_over.xml" afterDir="false" />
+    </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
@@ -14,6 +23,7 @@
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
   </component>
   <component name="ProjectId" id="1hyRBJqIinM8JAy5Yx7d3w5cJmI" />
+  <component name="ProjectLevelVcsManager" settingsEditedManually="true" />
   <component name="ProjectViewState">
     <option name="hideEmptyMiddlePackages" value="true" />
     <option name="showLibraryContents" value="true" />
@@ -39,12 +49,24 @@
     </task>
     <servers />
   </component>
+  <component name="Vcs.Log.Tabs.Properties">
+    <option name="TAB_STATES">
+      <map>
+        <entry key="MAIN">
+          <value>
+            <State />
+          </value>
+        </entry>
+      </map>
+    </option>
+    <option name="oldMeFiltersMigrated" value="true" />
+  </component>
   <component name="WindowStateProjectService">
-    <state x="532" y="194" key="FileChooserDialogImpl" timestamp="1603706403726">
-      <screen x="0" y="0" width="1366" height="728" />
+    <state x="598" y="220" key="FileChooserDialogImpl" timestamp="1604970184241">
+      <screen x="0" y="0" width="1536" height="824" />
     </state>
     <state x="532" y="194" key="FileChooserDialogImpl/0.0.1366.728@0.0.1366.728" timestamp="1603706403726" />
-    <state x="598" y="220" key="FileChooserDialogImpl/0.0.1536.824@0.0.1536.824" timestamp="1603393637918" />
+    <state x="598" y="220" key="FileChooserDialogImpl/0.0.1536.824@0.0.1536.824" timestamp="1604970184241" />
     <state x="748" y="276" key="FileChooserDialogImpl/0.0.1920.1035@0.0.1920.1035" timestamp="1603162232134" />
   </component>
 </project>
\ No newline at end of file
